(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,function(e,n,t){e.exports=t(22)},,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},,function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(6),l=t(1),c=t(7);t(13);function i(e){var n=e.name,t=e.label,a=e.value,o=e.onChange,l=e.min,c=e.max,i=Boolean(o);return r.a.createElement("label",{className:"number-input"},t,r.a.createElement("input",{name:n,type:"number",value:a,onChange:o,min:l,max:c,disabled:!i}))}i.defaultProps={name:null,onChange:null,min:null,max:null};var s=i,u=(t(14),Object.freeze({width:10,height:10,mines:15}));function f(e){var n=e.restart,t=Object(a.useState)(u),o=Object(l.a)(t,2),i=o[0],f=o[1],m=function(e){var n=e.currentTarget;if(""!==n.value&&!(n.value<n.min||n.value>n.max)){var t=parseInt(n.value),a=Object(c.a)({},i);switch(n.name){case"width":a.width=t;break;case"height":a.height=t;break;case"mines":a.mines=t}f(a)}},g=Math.min(i.width*i.height-1,999);return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(i)},className:"restart-config"},r.a.createElement(s,{name:"width",label:"Width",value:i.width,onChange:m,min:1,max:300}),r.a.createElement(s,{name:"height",label:"Height",value:i.height,onChange:m,min:1,max:300}),r.a.createElement(s,{name:"mines",label:"Mines",value:i.mines,onChange:m,min:1,max:g}),r.a.createElement("label",null,"Restart",r.a.createElement("button",{type:"submit",className:"restart embossed"},r.a.createElement("span",{className:"smiley"}))))}t(15);var m=function(e){var n=e.cell,t=e.xray,a=e.onClick,o=e.onMouseDown,l=e.onMouseUp,c=n.flagged,i=n.value,s=n.pressed;return r.a.createElement("button",{className:function(){if(s)return-1===i?"flat mine":"flat"}(),onClick:a,onMouseDown:o,onMouseUp:l},function(){if(c)return r.a.createElement("span",{className:"flag"},"f");if(!t&&!s)return r.a.createElement(r.a.Fragment,null);switch(i){case-1:return r.a.createElement("span",{className:"mine"},"X");case 0:return r.a.createElement(r.a.Fragment,null);default:return r.a.createElement("span",{className:"color-".concat(i)},i)}}())},g=t(4);function d(e,n,t){[-1,0,1].forEach((function(a){[-1,0,1].forEach((function(r){if(a||r){var o={row:n.row+a,cell:n.cell+r};e[o.row]&&e[o.row][o.cell]&&-1!==e[o.row][o.cell].value&&t(e[o.row][o.cell],o)}}))}))}function v(e,n,t){var a=Array(n).fill(null).map((function(){return Array(e).fill(null).map((function(){return{pressed:!1,value:0,flagged:!1}}))}));return Object(g.a)(Array(t)).forEach((function(){for(;;){var t={row:Math.floor(Math.random()*n),cell:Math.floor(Math.random()*e)};if(-1!==a[t.row][t.cell].value){a[t.row][t.cell].value=-1,d(a,t,(function(e){e.value+=1}));break}}})),a}function h(e,n,t,a,r){var o=null===a?e[n.row][n.cell].value:a,l=Object(g.a)(e);return l[n.row]=Object(g.a)(e[n.row]),l[n.row][n.cell]={pressed:t,value:o,flagged:r},l}t(16);function w(e){var n=e.restartFlag,t=e.width,o=e.height,c=e.mines,i=e.xray,s=e.flags,u=e.setFlags,f=e.setAlert,g=e.gameState,w=e.setGameState,b=Object(a.useState)(v(t,o,c)),p=Object(l.a)(b,2),E=p[0],y=p[1],k=function(e){return"".concat(e.row,"_").concat(e.cell)};Object(a.useEffect)((function(){y(v(t,o,c))}),[n,t,o,c]);var j=function(e){var n=E[e.row][e.cell],t=n.flagged,a=n.pressed,r=n.value;if(!t&&!a)switch(r){case-1:w("lost"),y(h(E,e,!0,null,!1)),f("game over");break;case 0:y(function(e,n){for(var t=function(e){return e.map((function(e){return e.map((function(e){return{pressed:e.pressed,value:e.value,flagged:e.flagged}}))}))}(e),a=[n];a.length;){var r=a.shift();if(!r)break;t[r.row][r.cell].pressed||(t[r.row][r.cell].pressed=!0,d(t,r,(function(e,n){e.flagged||(e.value>0&&(e.pressed=!0),0===e.value&&a.push(n))})))}return t}(E,e));break;default:y(h(E,e,!0,null,!1))}},O=function(e){return r.a.createElement(m,{key:k(e),cell:E[e.row][e.cell],xray:i,onClick:function(n){"ongoing"===g&&(n.shiftKey?function(e){var n=E[e.row][e.cell],t=n.flagged;if(!n.pressed)if(!t&&c<=s)f("no more flags");else{f("");var a=s+(t?-1:1);u(a);var r=h(E,e,!1,null,!t);y(r),a===c&&function(e){var n=function(e){var n=e.flagged,t=e.value;return-1!==t||-1===t&&n};return e.every((function(e){return e.every(n)}))}(r)&&(w("won"),f("game won"))}}(e):j(e))},onMouseDown:function(e){"ongoing"!==g||e.shiftKey||w("clicking")},onMouseUp:function(){"clicking"===g&&w("ongoing")}})};return r.a.createElement("div",{className:"board debossed"},E.map((function(e,n){return r.a.createElement("div",{key:n,className:"row"},e.map((function(e,t){return O({row:n,cell:t})})))})))}t(17);var b=function(e){var n=e.label,t=e.pressed,a=e.setPressed,o=t?"debossed":"embossed";return r.a.createElement("button",{className:"sticky-button ".concat(o),onClick:function(){return a(!t)}},n)};t(18);function p(e){var n=e.flags,t=e.mines,a=e.xray,o=e.setXray,l=e.alert,c=t-n;return r.a.createElement("section",{className:"stats"},r.a.createElement(s,{label:"Flags",value:c}),r.a.createElement(b,{label:"X-ray",pressed:a,setPressed:o}),r.a.createElement("p",{className:"alert"},l))}t(19);var E=function(){var e=Object(a.useState)(!1),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(u),i=Object(l.a)(c,2),s=i[0],m=i[1],g=Object(a.useState)(0),d=Object(l.a)(g,2),v=d[0],h=d[1],b=Object(a.useState)(""),E=Object(l.a)(b,2),y=E[0],k=E[1],j=Object(a.useState)("ongoing"),O=Object(l.a)(j,2),S=O[0],N=O[1],x=Object(a.useState)(!1),C=Object(l.a)(x,2),M=C[0],A=C[1];return r.a.createElement("section",{className:"app embossed ".concat(S)},r.a.createElement("header",null,r.a.createElement("div",{className:"debossed settings"},r.a.createElement(f,{restart:function(e){o(!t),m(e),h(0),k(""),N("ongoing")}}),r.a.createElement(p,{flags:v,mines:s.mines,xray:M,setXray:A,alert:y}))),r.a.createElement(w,{restartFlag:t,width:s.width,height:s.height,mines:s.mines,xray:M,flags:v,setFlags:h,setAlert:k,gameState:S,setGameState:N}))},y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}t(20),t(21);Object(o.render)(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/minesweeper",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/minesweeper","/service-worker.js");y?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):k(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):k(n,e)}))}}()}],[[8,1,2]]]);
//# sourceMappingURL=main.d79c5fe4.chunk.js.map