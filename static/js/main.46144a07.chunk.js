(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(6),o=n(1),c=n(7);n(13);function i(e){var t=e.name,n=e.label,a=e.value,l=e.onChange,o=e.min,c=e.max,i=Boolean(l);return r.a.createElement("label",{className:"number-input"},n,r.a.createElement("input",{name:t,type:"number",value:a,onChange:l,min:o,max:c,disabled:!i}))}i.defaultProps={name:null,onChange:null,min:null,max:null};var s=i,u=(n(14),Object.freeze({width:10,height:10,mines:15}));function f(e){var t=e.restart,n=Object(a.useState)(u),l=Object(o.a)(n,2),i=l[0],f=l[1],m=function(e){var t=e.currentTarget;if(""!==t.value&&!(t.value<t.min||t.value>t.max)){var n=parseInt(t.value),a=Object(c.a)({},i);switch(t.name){case"width":a.width=n;break;case"height":a.height=n;break;case"mines":a.mines=n}f(a)}},d=Math.min(i.width*i.height-1,999);return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(i)},className:"restart-config"},r.a.createElement(s,{name:"width",label:"Width",value:i.width,onChange:m,min:1,max:300}),r.a.createElement(s,{name:"height",label:"Height",value:i.height,onChange:m,min:1,max:300}),r.a.createElement(s,{name:"mines",label:"Mines",value:i.mines,onChange:m,min:1,max:d}),r.a.createElement("label",null,"Restart",r.a.createElement("button",{type:"submit",className:"restart embossed"},r.a.createElement("span",{className:"smiley"}))))}n(15);var m=function(e){var t=e.cell,n=e.xray,a=e.onClick,l=t.flagged,o=t.value,c=t.pressed;return r.a.createElement("button",{className:function(){if(c)return-1===o?"flat mine":"flat"}(),onClick:a},function(){if(l)return r.a.createElement("span",{className:"flag"},"f");if(!n&&!c)return r.a.createElement(r.a.Fragment,null);switch(o){case-1:return r.a.createElement("span",{className:"mine"},"X");case 0:return r.a.createElement(r.a.Fragment,null);default:return r.a.createElement("span",{className:"color-".concat(o)},o)}}())},d=n(4);function g(e,t,n){[-1,0,1].forEach((function(a){[-1,0,1].forEach((function(r){if(a||r){var l={row:t.row+a,cell:t.cell+r};e[l.row]&&e[l.row][l.cell]&&-1!==e[l.row][l.cell].value&&n(e[l.row][l.cell],l)}}))}))}function v(e,t,n){var a=Array(t).fill(null).map((function(){return Array(e).fill(null).map((function(){return{pressed:!1,value:0,flagged:!1}}))}));return Object(d.a)(Array(n)).forEach((function(){for(;;){var n={row:Math.floor(Math.random()*t),cell:Math.floor(Math.random()*e)};if(-1!==a[n.row][n.cell].value){a[n.row][n.cell].value=-1,g(a,n,(function(e){e.value+=1}));break}}})),a}function h(e,t,n,a,r){var l=null===a?e[t.row][t.cell].value:a,o=Object(d.a)(e);return o[t.row]=Object(d.a)(e[t.row]),o[t.row][t.cell]={pressed:n,value:l,flagged:r},o}n(16);var b=Object.freeze({ongoing:"ongoing",won:"won",lost:"lost"});function w(e){var t=e.restartFlag,n=e.width,l=e.height,c=e.mines,i=e.xray,s=e.flags,u=e.setFlags,f=e.setAlert,d=e.gameState,w=e.setGameState,p=Object(a.useState)(v(n,l,c)),E=Object(o.a)(p,2),y=E[0],j=E[1],O=function(e){return"".concat(e.row,"_").concat(e.cell)};Object(a.useEffect)((function(){j(v(n,l,c))}),[t,n,l,c]);var k=function(e){var t=y[e.row][e.cell],n=t.flagged,a=t.pressed,r=t.value;if(!n&&!a)switch(r){case-1:w(b.lost),j(h(y,e,!0,null,!1)),f("game over");break;case 0:j(function(e,t){for(var n=function(e){return e.map((function(e){return e.map((function(e){return{pressed:e.pressed,value:e.value,flagged:e.flagged}}))}))}(e),a=[t];a.length;){var r=a.shift();if(!r)break;n[r.row][r.cell].pressed||(n[r.row][r.cell].pressed=!0,g(n,r,(function(e,t){e.flagged||(e.value>0&&(e.pressed=!0),0===e.value&&a.push(t))})))}return n}(y,e));break;default:j(h(y,e,!0,null,!1))}},S=function(e){return r.a.createElement(m,{key:O(e),cell:y[e.row][e.cell],xray:i,onClick:function(t){d===b.ongoing&&(t.shiftKey?function(e){var t=y[e.row][e.cell],n=t.flagged;if(!t.pressed)if(!n&&c<=s)f("no more flags");else{f("");var a=s+(n?-1:1);u(a);var r=h(y,e,!1,null,!n);j(r),a===c&&function(e){var t=function(e){var t=e.flagged,n=e.value;return-1!==n||-1===n&&t};return e.every((function(e){return e.every(t)}))}(r)&&(w(b.won),f("game won"))}}(e):k(e))}})};return r.a.createElement("div",{className:"board debossed"},y.map((function(e,t){return r.a.createElement("div",{key:t,className:"row"},e.map((function(e,n){return S({row:t,cell:n})})))})))}n(17);var p=function(e){var t=e.label,n=e.pressed,a=e.setPressed,l=n?"debossed":"embossed";return r.a.createElement("button",{className:"sticky-button ".concat(l),onClick:function(){return a(!n)}},t)};n(18);function E(e){var t=e.flags,n=e.mines,a=e.xray,l=e.setXray,o=e.alert,c=n-t;return r.a.createElement("section",{className:"stats"},r.a.createElement(s,{label:"Flags",value:c}),r.a.createElement(p,{label:"X-ray",pressed:a,setPressed:l}),r.a.createElement("p",{className:"alert"},o))}n(19);var y=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(u),i=Object(o.a)(c,2),s=i[0],m=i[1],d=Object(a.useState)(0),g=Object(o.a)(d,2),v=g[0],h=g[1],p=Object(a.useState)(""),y=Object(o.a)(p,2),j=y[0],O=y[1],k=Object(a.useState)(b.ongoing),S=Object(o.a)(k,2),N=S[0],x=S[1],C=Object(a.useState)(!1),A=Object(o.a)(C,2),W=A[0],F=A[1];return r.a.createElement("section",{className:"app embossed ".concat(N)},r.a.createElement("header",null,r.a.createElement("div",{className:"debossed settings"},r.a.createElement(f,{restart:function(e){l(!n),m(e),h(0),O(""),x(b.ongoing)}}),r.a.createElement(E,{flags:v,mines:s.mines,xray:W,setXray:F,alert:j}))),r.a.createElement(w,{restartFlag:n,width:s.width,height:s.height,mines:s.mines,xray:W,flags:v,setFlags:h,setAlert:O,gameState:N,setGameState:x}))},j=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function O(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(20),n(21);Object(l.render)(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");j?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):O(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):O(t,e)}))}}()}],[[8,1,2]]]);
//# sourceMappingURL=main.46144a07.chunk.js.map